{"version":3,"sources":["../../server/data/schema.js"],"names":["globalId","type","id","obj","GraphQLTodo","GraphQLUser","nodeInterface","nodeField","name","fields","text","resolve","complete","status","random_element","details","integer","interfaces","nodeType","TodosConnection","connectionType","GraphQLTodoEdge","edgeType","todos","args","defaultValue","_","totalCount","length","completedCount","echo","Query","viewer","user","node","GraphQLAddTodoMutation","inputFields","outputFields","todoEdge","localTodoId","todo","cursor","mutateAndGetPayload","GraphQLChangeTodoStatusMutation","GraphQLMarkAllTodosMutation","changedTodos","changedTodoLocalIds","map","GraphQLRemoveCompletedTodosMutation","deletedTodoIds","deletedTodoLocalIds","bind","GraphQLRemoveTodoMutation","deletedTodoId","GraphQLRenameTodoMutation","Mutation","addTodo","changeTodoStatus","markAllTodos","removeCompletedTodos","removeTodo","renameTodo","GraphqlTodoSubscription","arg","subscribe","context","subscript2RabbitMQ","undefined","getPayload","Subscription","todoSubScription","schema","query","mutation","subscription"],"mappings":"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","file":"schema.js","sourcesContent":["import {\n  GraphQLBoolean,\n  GraphQLID,\n  GraphQLInt,\n  GraphQLList,\n  GraphQLNonNull,\n  GraphQLObjectType,\n  GraphQLSchema,\n  GraphQLString,\n} from 'graphql';\n\nimport {\n  connectionArgs,\n  connectionDefinitions,\n  connectionFromArray,\n  cursorForObjectInConnection,\n  fromGlobalId,\n  globalIdField,\n  mutationWithClientMutationId,\n  nodeDefinitions,\n  toGlobalId,\n} from 'graphql-relay';\n\nimport {\n  subscriptionWithClientId,\n} from 'graphql-relay-subscription';\n\nimport {\n  Todo,\n  User,\n  addTodo,\n  changeTodoStatus,\n  getTodo,\n  getTodos,\n  getUser,\n  getViewer,\n  markAllTodos,\n  removeCompletedTodos,\n  removeTodo,\n  renameTodo,\n} from './database';\n\nimport { globalIdField_unibet, fromGlobalId_unibet } from './unibetIds';\nimport casual from 'casual';\n\nconst { nodeInterface, nodeField } = nodeDefinitions(\n  (globalId) => {\n    const { type, id } = fromGlobalId_unibet(globalId);\n    if (type === 'Todo') {\n      return getTodo(id);\n    } else if (type === 'User') {\n      return getUser(id);\n    }\n    return null;\n  },\n  (obj) => {\n    if (obj instanceof Todo) {\n      return GraphQLTodo;\n    } else if (obj instanceof User) {\n      return GraphQLUser;\n    }\n    return null;\n  }\n);\n\nconst GraphQLTodo = new GraphQLObjectType({\n  name: 'Todo',\n  fields: {\n    id: globalIdField_unibet('Todo'),\n    text: {\n      type: GraphQLString,\n      resolve: (obj) => obj.text,\n    },\n    complete: {\n      type: GraphQLBoolean,\n      resolve: (obj) => obj.complete,\n    },\n    status: {\n      type: GraphQLString,\n      resolve: () => casual.random_element(['open', 'suspended', 'finished']),\n    },\n    details: {\n      type: GraphQLString,\n      resolve: () => `details. data=${casual.integer(1, 100)}`,\n    },\n  },\n  interfaces: [nodeInterface],\n});\n\nconst {\n  connectionType: TodosConnection,\n  edgeType: GraphQLTodoEdge,\n} = connectionDefinitions({\n    name: 'Todo',\n    nodeType: GraphQLTodo,\n  });\n\nconst GraphQLUser = new GraphQLObjectType({\n  name: 'User',\n  fields: {\n    id: globalIdField_unibet('User'),\n    todos: {\n      type: TodosConnection,\n      args: {\n        status: {\n          type: GraphQLString,\n          defaultValue: 'any',\n        },\n        ...connectionArgs,\n      },\n      resolve: (obj, { status, _, ...args }) =>\n        connectionFromArray(getTodos(status), args),\n    },\n    totalCount: {\n      type: GraphQLInt,\n      resolve: () => getTodos().length,\n    },\n    completedCount: {\n      type: GraphQLInt,\n      resolve: () => getTodos('completed').length,\n    },\n    echo: {\n      type: GraphQLInt,\n      args: {\n        _: {\n          type: GraphQLInt,\n          defaultValue: 0,\n        },\n      },\n      resolve: (obj, { _ }) => _,\n    },\n  },\n  interfaces: [nodeInterface],\n});\n\nconst Query = new GraphQLObjectType({\n  name: 'Query',\n  fields: {\n    viewer: {\n      type: new GraphQLObjectType({\n        name: 'Viewer', // this will trigger viewerhandler\n        fields: {\n          user: {\n            type: GraphQLUser,\n            resolve: () => getViewer(),\n          },\n        },\n      }),\n      resolve: () => ({}),\n    },\n    node: nodeField,\n  },\n});\n\nconst GraphQLAddTodoMutation = mutationWithClientMutationId({\n  name: 'AddTodo',\n  inputFields: {\n    text: { type: new GraphQLNonNull(GraphQLString) },\n  },\n  outputFields: {\n    todoEdge: {\n      type: GraphQLTodoEdge,\n      resolve: ({ localTodoId }) => {\n        const todo = getTodo(localTodoId);\n        return {\n          cursor: cursorForObjectInConnection(getTodos(), todo),\n          node: todo,\n        };\n      },\n    },\n    viewer: {\n      type: GraphQLUser,\n      resolve: () => getViewer(),\n    },\n  },\n  mutateAndGetPayload: ({ text }) => {\n    const localTodoId = addTodo(text);\n    return { localTodoId };\n  },\n});\n\nconst GraphQLChangeTodoStatusMutation = mutationWithClientMutationId({\n  name: 'ChangeTodoStatus',\n  inputFields: {\n    complete: { type: new GraphQLNonNull(GraphQLBoolean) },\n    id: { type: new GraphQLNonNull(GraphQLID) },\n  },\n  outputFields: {\n    todo: {\n      type: GraphQLTodo,\n      resolve: ({ localTodoId }) => getTodo(localTodoId),\n    },\n    viewer: {\n      type: GraphQLUser,\n      resolve: () => getViewer(),\n    },\n  },\n  mutateAndGetPayload: ({ id, complete }) => {\n\n    const localTodoId = fromGlobalId_unibet(id).id;\n    changeTodoStatus(localTodoId, complete);\n    return { localTodoId };\n  },\n});\n\nconst GraphQLMarkAllTodosMutation = mutationWithClientMutationId({\n  name: 'MarkAllTodos',\n  inputFields: {\n    complete: { type: new GraphQLNonNull(GraphQLBoolean) },\n  },\n  outputFields: {\n    changedTodos: {\n      type: new GraphQLList(GraphQLTodo),\n      resolve: ({ changedTodoLocalIds }) => changedTodoLocalIds.map(getTodo),\n    },\n    viewer: {\n      type: GraphQLUser,\n      resolve: () => getViewer(),\n    },\n  },\n  mutateAndGetPayload: ({ complete }) => {\n    const changedTodoLocalIds = markAllTodos(complete);\n    return { changedTodoLocalIds };\n  },\n});\n\n// TODO: Support plural deletes\nconst GraphQLRemoveCompletedTodosMutation = mutationWithClientMutationId({\n  name: 'RemoveCompletedTodos',\n  outputFields: {\n    deletedTodoIds: {\n      type: new GraphQLList(GraphQLString),\n      resolve: ({ deletedTodoIds }) => deletedTodoIds,\n    },\n    viewer: {\n      type: GraphQLUser,\n      resolve: () => getViewer(),\n    },\n  },\n  mutateAndGetPayload: () => {\n    const deletedTodoLocalIds = removeCompletedTodos();\n    const deletedTodoIds = deletedTodoLocalIds.map(toGlobalId.bind(null, 'Todo'));\n    return { deletedTodoIds };\n  },\n});\n\nconst GraphQLRemoveTodoMutation = mutationWithClientMutationId({\n  name: 'RemoveTodo',\n  inputFields: {\n    id: { type: new GraphQLNonNull(GraphQLID) },\n  },\n  outputFields: {\n    deletedTodoId: {\n      type: GraphQLID,\n      resolve: ({ id }) => id,\n    },\n    viewer: {\n      type: GraphQLUser,\n      resolve: () => getViewer(),\n    },\n  },\n  mutateAndGetPayload: ({ id }) => {\n    const localTodoId = fromGlobalId_unibet(id).id;\n    removeTodo(localTodoId);\n    return { id };\n  },\n});\n\nconst GraphQLRenameTodoMutation = mutationWithClientMutationId({\n  name: 'RenameTodo',\n  inputFields: {\n    id: { type: new GraphQLNonNull(GraphQLID) },\n    text: { type: new GraphQLNonNull(GraphQLString) },\n  },\n  outputFields: {\n    todo: {\n      type: GraphQLTodo,\n      resolve: ({ localTodoId }) => getTodo(localTodoId),\n    },\n  },\n  mutateAndGetPayload: ({ id, text }) => {\n    const localTodoId = fromGlobalId_unibet(id).id;\n    renameTodo(localTodoId, text);\n    return { localTodoId };\n  },\n});\n\nconst Mutation = new GraphQLObjectType({\n  name: 'Mutation',\n  fields: {\n    addTodo: GraphQLAddTodoMutation,\n    changeTodoStatus: GraphQLChangeTodoStatusMutation,\n    markAllTodos: GraphQLMarkAllTodosMutation,\n    removeCompletedTodos: GraphQLRemoveCompletedTodosMutation,\n    removeTodo: GraphQLRemoveTodoMutation,\n    renameTodo: GraphQLRenameTodoMutation,\n  },\n});\n\n\n\nconst GraphqlTodoSubscription = subscriptionWithClientId({\n  name: 'TodoSubScription',\n  inputFields: () => ({\n    arg: { type: GraphQLString },\n  }),\n  outputFields: () => ({\n    arg: { type: GraphQLString }, // useless, just for demo purpose \n    todo: { //useful!!\n      type: GraphQLTodo,\n      resolve: ({ localTodoId }) => {\n        return typeof localTodoId !== 'undefined' ? getTodo(localTodoId) : null;\n      },\n    },\n  }),\n  //subscription mode;\n  subscribe: async ({ arg }, context) => {\n    const { subscript2RabbitMQ } = context;\n    subscript2RabbitMQ();\n    return { localTodoId: undefined, arg };\n  },\n  //payload mode (event emitter mode)\n  getPayload: async ({ localTodoId }, { arg }) => {\n    return { localTodoId, arg };\n  },\n});\n\nconst Subscription = new GraphQLObjectType({\n  name: 'Subscription',\n  fields: {\n    todoSubScription: GraphqlTodoSubscription,\n  },\n});\n\n\n\nexport const schema = new GraphQLSchema({\n  query: Query,\n  mutation: Mutation,\n  subscription: Subscription,\n});\n\n\n\n"]}